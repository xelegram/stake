<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CrptoStake.me — Stake smarter</title>
  <meta name="description" content="CrptoStake.me — modern staking dashboard with a clean calculator, staking options, and premium glass UI." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ["Inter", "ui-sans-serif", "system-ui"] },
          boxShadow: {
            soft: "0 20px 60px rgba(0,0,0,.35)",
          }
        }
      }
    }
  </script>

  <style>
    :root{
      --bg0:#05040a;
      --bg1:#07061a;
      --a:#7c3aed;   /* violet */
      --b:#06b6d4;   /* cyan */
      --c:#22c55e;   /* green */
      --glass: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.08);
    }
    html,body{height:100%;}
    body{
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(124,58,237,.35), transparent 60%),
        radial-gradient(900px 500px at 80% 20%, rgba(6,182,212,.22), transparent 60%),
        radial-gradient(900px 600px at 50% 120%, rgba(34,197,94,.12), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
    }
    .glass{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border: 1px solid var(--stroke);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }
    .glass-dark{
      background: linear-gradient(180deg, rgba(0,0,0,.25), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
    }
    .ring-glow{
      box-shadow:
        0 0 0 1px rgba(255,255,255,.08),
        0 0 40px rgba(124,58,237,.18),
        0 0 70px rgba(6,182,212,.12);
    }
    .btn{
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      transition: .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); }
    .btn-primary{
      background: linear-gradient(135deg, rgba(124,58,237,.95), rgba(6,182,212,.9));
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 18px 40px rgba(124,58,237,.18);
    }
    .btn-primary:hover{ filter: brightness(1.06); transform: translateY(-1px); }
    .chip{
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
    }
    .grid-fade:before{
      content:"";
      position:absolute; inset:-1px;
      background:
        linear-gradient(to right, rgba(255,255,255,.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.06) 1px, transparent 1px);
      background-size: 48px 48px;
      mask-image: radial-gradient(ellipse at 50% 20%, black 0%, transparent 70%);
      opacity:.25;
      pointer-events:none;
    }
    /* nice range */
    input[type="range"]{
      -webkit-appearance:none; appearance:none;
      height: 8px; border-radius: 999px;
      background: rgba(255,255,255,.10);
      outline:none;
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none; appearance:none;
      width: 18px; height:18px; border-radius:999px;
      background: white;
      border: 3px solid rgba(124,58,237,.85);
      box-shadow: 0 8px 18px rgba(0,0,0,.35);
      cursor:pointer;
    }
    /* modal */
    .modal-backdrop{ background: rgba(0,0,0,.55); backdrop-filter: blur(6px); }
    .hidden-soft{ display:none; }
  </style>
</head>

<body class="text-white font-sans selection:bg-white/20">
  <!-- Top ambient grid -->
  <div class="pointer-events-none fixed inset-0 opacity-70">
    <div class="grid-fade absolute inset-0"></div>
  </div>

  <!-- Header -->
  <header class="sticky top-0 z-50">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="mt-4 glass rounded-2xl ring-glow">
        <div class="flex items-center justify-between px-4 sm:px-6 py-3">
          <!-- Brand -->
          <a href="#" class="flex items-center gap-3">
            <div class="h-10 w-10 rounded-2xl glass-dark flex items-center justify-center">
              <!-- simple mark -->
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                <path d="M12 2l8 5v10l-8 5-8-5V7l8-5Z" stroke="rgba(255,255,255,.85)" stroke-width="1.6"/>
                <path d="M7.5 9.2 12 12l4.5-2.8" stroke="rgba(6,182,212,.9)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 12v6.6" stroke="rgba(124,58,237,.95)" stroke-width="1.6" stroke-linecap="round"/>
              </svg>
            </div>
            <div class="leading-tight">
              <div class="text-lg font-extrabold tracking-tight">CrptoStake<span class="text-white/60">.me</span></div>
              <div class="text-xs text-white/55 -mt-0.5">stake • earn • chill</div>
            </div>
          </a>

          <!-- Desktop nav -->
          <nav class="hidden md:flex items-center gap-6 text-sm text-white/75">
            <a class="hover:text-white transition" href="#calculator">Calculator</a>
            <a class="hover:text-white transition" href="#options">Options</a>
            <a class="hover:text-white transition" href="#security">Security</a>
            <a class="hover:text-white transition" href="#faq">FAQ</a>
          </nav>

          <!-- Actions -->
          <div class="hidden md:flex items-center gap-3">
            <button class="btn rounded-xl px-4 py-2 text-sm" id="btnDownload">Download app</button>
            <button class="btn-primary rounded-xl px-5 py-2.5 text-sm font-semibold" id="login">
              Log In
            </button>
            <button class="btn-primary rounded-xl px-5 py-2.5 text-sm font-semibold" id="signup">
              Sign Up
            </button>
          </div>

          <!-- Mobile button -->
          <button class="md:hidden btn rounded-xl px-3 py-2" id="btnMobile">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
              <path d="M4 7h16M4 12h16M4 17h16" stroke="rgba(255,255,255,.9)" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </button>
        </div>

        <!-- Mobile nav -->
        <div class="md:hidden px-4 pb-4 hidden-soft" id="mobileMenu">
          <div class="h-px bg-white/10 my-2"></div>
          <div class="flex flex-col gap-2 text-sm text-white/80">
            <a class="btn rounded-xl px-4 py-2" href="#calculator">Calculator</a>
            <a class="btn rounded-xl px-4 py-2" href="#options">Options</a>
            <a class="btn rounded-xl px-4 py-2" href="#security">Security</a>
            <a class="btn rounded-xl px-4 py-2" href="#faq">FAQ</a>
            <div class="grid grid-cols-2 gap-2 pt-2">
              <button class="btn rounded-xl px-4 py-2" id="btnDownloadM">Download</button>
              <button class="btn-primary rounded-xl px-4 py-2 font-semibold" id="signup">Invest Now</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <section class="pt-10 sm:pt-14 pb-10">
      <div class="grid lg:grid-cols-12 gap-8 items-center">
        <div class="lg:col-span-7">
          <div class="inline-flex items-center gap-2 chip rounded-full px-3 py-1 text-xs text-white/80">
            <span class="inline-block h-2 w-2 rounded-full" style="background: rgba(34,197,94,.9)"></span>
            Live rates • earning
          </div>

          <h1 class="mt-5 text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight">
            Investing in crypto and
            <span class="bg-clip-text text-transparent"
              style="background-image: linear-gradient(135deg, rgba(124,58,237,1), rgba(6,182,212,1));">
              Double your earnings
            </span>
          </h1>

          <p class="mt-4 text-white/70 max-w-2xl">
Worry of losing trade? We help you financial freedom to maximize you. Our platform has bigger pool to good enough to leverage your capital with 100% winning streak.
          </p>

          <div class="mt-6 flex flex-col sm:flex-row gap-3">
            <button class="btn-primary rounded-2xl px-6 py-3 font-semibold" id="signup">
              Open staking
            </button>
            <a href="#options" class="btn rounded-2xl px-6 py-3 font-semibold text-center">
              Download app
            </a>
          </div>

          <div class="mt-8 grid grid-cols-3 gap-3 sm:gap-4 max-w-xl">
            <div class="glass rounded-2xl p-4">
              <div class="text-2xl font-extrabold" id="statStakers">1,420+</div>
              <div class="text-xs text-white/60 mt-1">Stakers</div>
            </div>
            <div class="glass rounded-2xl p-4">
              <div class="text-2xl font-extrabold" id="statStaked">$72.8M</div>
              <div class="text-xs text-white/60 mt-1">Total staked</div>
            </div>
            <div class="glass rounded-2xl p-4">
              <div class="text-2xl font-extrabold" id="statPaid">$4.9M</div>
              <div class="text-xs text-white/60 mt-1">Rewards paid</div>
            </div>
          </div>
        </div>

        <!-- Calculator card -->
        <div class="lg:col-span-5" id="calculator">
          <div class="glass rounded-3xl p-5 sm:p-6 shadow-soft ring-glow">
            <div class="flex items-start justify-between gap-4">
              <div>
                <div class="text-sm text-white/70">Staking calculator</div>
                <div class="text-xl font-bold mt-1" id="calcTitle">Ethereum (ETH)</div>
              </div>

              <button class="chip rounded-xl px-3 py-2 text-sm flex items-center gap-2" id="assetBtn">
                <span class="h-2.5 w-2.5 rounded-full" id="assetDot" style="background: rgba(6,182,212,.95)"></span>
                <span id="assetTicker">ETH</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <path d="M6 9l6 6 6-6" stroke="rgba(255,255,255,.85)" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>

            <!-- Asset dropdown -->
            <div class="mt-3 hidden-soft" id="assetMenu">
              <div class="glass-dark rounded-2xl p-2 grid gap-1 text-sm">
                <!-- filled by JS -->
              </div>
            </div>

            <div class="mt-5 grid grid-cols-2 gap-3">
              <div class="glass-dark rounded-2xl p-4">
                <div class="text-xs text-white/60">Amount</div>
                <div class="mt-1 flex items-baseline gap-2">
                  <input id="amountInput" type="number" min="0" step="0.01"
                    class="w-full bg-transparent outline-none text-2xl font-extrabold"
                    value="2" />
                  <div class="text-sm text-white/60" id="amountTicker">ETH</div>
                </div>
              </div>
              <div class="glass-dark rounded-2xl p-4">
                <div class="text-xs text-white/60">Est. value</div>
                <div class="mt-1 text-2xl font-extrabold" id="usdValue">$0</div>
                <div class="text-xs text-white/50 mt-1">Indicative only</div>
              </div>
            </div>

            <div class="mt-4 glass-dark rounded-2xl p-4">
              <div class="flex items-center justify-between text-xs text-white/60">
                <span>Lock period</span>
                <span class="text-white/80 font-semibold" id="lockLabel">30 days</span>
              </div>
              <input id="lockRange" class="mt-3 w-full" type="range" min="7" max="30" value="30" />
              <div class="mt-2 flex items-center justify-between text-[11px] text-white/45">
                <span>7d</span><span>18d</span><span>30d</span>
              </div>
            </div>

            <div class="mt-4 grid grid-cols-2 gap-3">
              <div class="glass-dark rounded-2xl p-4">
                <div class="text-xs text-white/60">APY</div>
                <div class="mt-1 text-2xl font-extrabold"><span id="apyValue">4.60</span>%</div>
                <div class="text-xs text-white/50 mt-1" id="apyHint">Varies with lock</div>
              </div>
              <div class="glass-dark rounded-2xl p-4">
                <div class="text-xs text-white/60">Est. reward</div>
                <div class="mt-1 text-2xl font-extrabold" id="rewardValue">0.00</div>
                <div class="text-xs text-white/50 mt-1" id="rewardSub">per lock period</div>
              </div>
            </div>

            <button class="mt-5 w-full btn-primary rounded-2xl py-3 font-semibold" id="signup">
              Stake now
            </button>

            <div class="mt-3 text-xs text-white/50 leading-relaxed">
              Calculate your estimated earnings
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Options -->
    <section id="options" class="pb-14">
      <div class="flex items-end justify-between gap-4">
        <div>
          <h2 class="text-3xl sm:text-4xl font-extrabold tracking-tight">Staking options</h2>
          <p class="mt-2 text-white/65 max-w-2xl">
          </p>
        </div>
        <div class="hidden sm:flex gap-2">
          <button class="btn rounded-xl px-4 py-2 text-sm" id="btnShuffle">Shuffle rates</button>
          <button class="btn rounded-xl px-4 py-2 text-sm" id="btnSort">Sort by APY</button>
        </div>
      </div>

      <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-4" id="optionsGrid">
        <!-- Cards by JS -->
      </div>

      <div class="mt-5 sm:hidden grid grid-cols-2 gap-2">
        <button class="btn rounded-xl px-4 py-2 text-sm" id="btnShuffleM">Shuffle</button>
        <button class="btn rounded-xl px-4 py-2 text-sm" id="btnSortM">Sort APY</button>
      </div>
    </section>

    <!-- Security / features -->
    <section id="security" class="pb-14">
      <div class="glass rounded-3xl p-6 sm:p-8">
        <div class="grid lg:grid-cols-12 gap-6 items-center">
          <div class="lg:col-span-7">
            <h3 class="text-2xl sm:text-3xl font-extrabold">Earn $15 for your first credit card deposit</h3>
            <p class="mt-2 text-white/65">
            When you make your first deposit by credit card, we'll give you $15.
            </p>

            <div class="mt-5 grid sm:grid-cols-2 gap-4">
              <div class="glass-dark rounded-2xl p-4">
                <div class="font-semibold">Automatic conversion</div>
                <div class="text-sm text-white/60 mt-1">Credit card deposits are automatically converted into crypto coin.</div>
              </div>
              <div class="glass-dark rounded-2xl p-4">
                <div class="font-semibold">Earn boost</div>
                <div class="text-sm text-white/60 mt-1">1% boost to your earnings when you deposit with a credit card.</div>
              </div>
            </div>
          </div>

          <div class="lg:col-span-5">
            <div class="glass-dark rounded-3xl p-5 ring-glow">
              <div class="text-sm text-white/70">Quick checklist</div>
              <ul class="mt-3 space-y-2 text-sm text-white/70">
                <li class="flex gap-2"><span class="text-white">✓</span> Maximize your profits</li>
                <li class="flex gap-2"><span class="text-white">✓</span> Long-term investment</li>
                <li class="flex gap-2"><span class="text-white">✓</span> Receive daily earnings</li>
                <li class="flex gap-2"><span class="text-white">✓</span> Earn 100% of your capital</li>
              </ul>
              <button class="mt-4 w-full btn rounded-2xl py-3 font-semibold" id="btnConnect">
                Invest Now
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="pb-16">
      <h3 class="text-2xl sm:text-3xl font-extrabold">FAQ</h3>
      <div class="mt-5 grid lg:grid-cols-2 gap-4">
        <details class="glass rounded-2xl p-5">
          <summary class="cursor-pointer font-semibold">How it works</summary>
          <p class="mt-2 text-sm text-white/65">
            Cryptocurrency staking works by locking your tokens on a Proof-of-Stake (PoS) network to help validate transactions and secure the blockchain, acting as a digital "fixed-term deposit," and in return, you receive rewards in the same cryptocurrency, similar to earning interest, allowing your assets to generate passive income while contributing to the security and operability of the network.
          </p>
        </details>
        <details class="glass rounded-2xl p-5">
          <summary class="cursor-pointer font-semibold">How to invest</summary>
          <p class="mt-2 text-sm text-white/65">
            You can invest from your account panel by adding your first deposit with cryptocurrencies or buy cryptocurrencies with credit cards. Your profits will be distributed daily on the dashboard.
          </p>
        </details>
        <details class="glass rounded-2xl p-5">
          <summary class="cursor-pointer font-semibold">When my earnings are added?</summary>
          <p class="mt-2 text-sm text-white/65">
            You can view your daily earnings from the dashboard.
          </p>
        </details>
        <details class="glass rounded-2xl p-5">
          <summary class="cursor-pointer font-semibold">What are the risks?</summary>
          <p class="mt-2 text-sm text-white/65">
            The risk percentage is 0%. Cryptocurrency staking is based on using your crypto to contribute to the cryptocurrency ecosystem and transaction processing. Profits are distributed from these transactions, making it a win-win situation: you help the ecosystem and generate passive income at the same time.
          </p>
        </details>
      </div>
    </section>

    <!-- Footer -->
    <footer class="pb-10">
      <div class="glass rounded-3xl p-6 flex flex-col sm:flex-row gap-4 items-center justify-between">
        <div class="text-sm text-white/65">
          © <span id="year"></span> <span class="font-semibold text-white">CrptoStake.me</span> 
        </div>
        <div class="flex gap-2">
          <button class="btn rounded-xl px-4 py-2 text-sm" id="btnPrivacy">Download App</button>
          <button class="btn-primary rounded-xl px-4 py-2 text-sm font-semibold" id="signup">Stake now</button>
        </div>
      </div>
    </footer>
  </main>

  <!-- Modal -->
  <div class="fixed inset-0 z-[80] hidden-soft" id="modalWrap" aria-hidden="true">
    <div class="absolute inset-0 modal-backdrop" id="modalBackdrop"></div>

    <div class="relative min-h-full flex items-center justify-center p-4">
      <div class="glass rounded-3xl w-full max-w-lg p-5 sm:p-6 shadow-soft ring-glow">
        <div class="flex items-start justify-between gap-4">
          <div>
            <div class="text-sm text-white/65">Stake flow</div>
            <div class="text-2xl font-extrabold mt-1">Stake with CrptoStake.me</div>
          </div>
          <button class="btn rounded-xl px-3 py-2" id="modalClose">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M6 6l12 12M18 6l-12 12" stroke="rgba(255,255,255,.9)" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </button>
        </div>

        <div class="mt-4 glass-dark rounded-2xl p-4">
          <div class="text-sm text-white/70">Selected</div>
          <div class="mt-1 text-white font-semibold">
            <span id="modalAsset">ETH</span> • <span id="modalAmount">2</span> • <span id="modalLock">30 days</span>
          </div>
          <div class="mt-2 text-sm text-white/60">
            Est. reward: <span class="text-white font-semibold" id="modalReward">0.00</span>
          </div>
        </div>

        <div class="mt-4 grid sm:grid-cols-2 gap-3">
          <button class="btn rounded-2xl py-3 font-semibold" id="modalSimulate">
            Simulate tx (UI)
          </button>
          <button class="btn-primary rounded-2xl py-3 font-semibold" id="modalConfirm">
            Confirm (connect backend)
          </button>
        </div>

        <p class="mt-3 text-xs text-white/50">
          Hook these buttons to your real wallet connect + staking methods. This is only UI behavior.
        </p>
      </div>
    </div>
  </div>

<script src="./signupModal.js"></script>
<script src="./loginmodal.js"></script>

<script>
  // -----------------------------
  // Data (edit freely)
  // -----------------------------
  const ASSETS = [
    { name:"Ethereum", ticker:"ETH",  price: 3120,     dot:"rgba(6,182,212,.95)", baseApy: 117.6, min: 0.25, lockMin: 7,  lockMax: 30 },
    { name:"USDT",     ticker:"USDT", price: 1,        dot:"rgba(34,197,94,.9)",  baseApy: 120.1, min: 1,    lockMin: 7,  lockMax: 30  },
    { name:"Bitcoin",  ticker:"BTC",  price: 90956.51, dot:"rgba(124,58,237,.95)",baseApy: 115.8, min: 50,   lockMin: 7,  lockMax: 30 },
    { name:"Solana",   ticker:"SOL",  price: 140.63,   dot:"rgba(236,72,153,.9)", baseApy: 113.1, min: 20,   lockMin: 14, lockMax: 30 },
    { name:"Litecoin", ticker:"LTC",  price: 81.53,    dot:"rgba(148,163,184,.9)",baseApy: 116.2, min: 5,    lockMin: 14, lockMax: 30 },
    { name:"TRON",     ticker:"TRX",  price: 0.29,     dot:"rgba(255,255,255,.8)",baseApy: 128.2, min: 10,   lockMin: 7,  lockMax: 30 },
  ];

  const OPTIONS = [
    { name:"Ethereum", ticker:"ETH",  apy: 117.6, unstake:"10 days",  min:"0.25 ETH",  spark:"wavy" },
    { name:"USDT",     ticker:"USDT", apy: 120.1, unstake:"28 days",  min:"20 trc20",  spark:"spiky" },
    { name:"Bitcoin",  ticker:"BTC",  apy: 115.8, unstake:"21 days",  min:"5 BTC",     spark:"flat" },
    { name:"Solana",   ticker:"SOL",  apy: 113.1, unstake:"instant",  min:"50 SOL",    spark:"wavy2" },
    { name:"Litecoin", ticker:"LTC",  apy: 116.2, unstake:"5 days",   min:"1 LTC",     spark:"wavefast" },
    { name:"TRON",     ticker:"TRX",  apy: 128.2, unstake:"4 days",   min:"10 TRX",    spark:"spiky2" },
  ];

  // -----------------------------
  // Helpers
  // -----------------------------
  const $ = (id) => document.getElementById(id);
  const fmtUSD = (n) => {
    const v = Number(n || 0);
    return v.toLocaleString(undefined, { style:"currency", currency:"USD", maximumFractionDigits: 2 });
  };
  const clamp = (v, a, b) => Math.max(a, Math.min(b, v));
  const rnd = (a,b) => a + Math.random()*(b-a);

  // -----------------------------
  // Mobile menu
  // -----------------------------
  const mobileBtn = $("btnMobile");
  const mobileMenu = $("mobileMenu");
  if (mobileBtn && mobileMenu) {
    mobileBtn.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden-soft");
    });
    mobileMenu.querySelectorAll("a").forEach(a=>{
      a.addEventListener("click", ()=> mobileMenu.classList.add("hidden-soft"));
    });
  }

  // -----------------------------
  // Asset dropdown
  // -----------------------------
  let selected = ASSETS[0];

  function renderAssetMenu(){
    const menu = $("assetMenu");
    if (!menu) return;
    const wrap = menu.querySelector(".glass-dark");
    if (!wrap) return;

    wrap.innerHTML = "";
    ASSETS.forEach(asset=>{
      const btn = document.createElement("button");
      btn.className = "w-full text-left px-3 py-2 rounded-xl hover:bg-white/5 transition flex items-center justify-between";
      btn.innerHTML = `
        <span class="flex items-center gap-2">
          <span class="h-2.5 w-2.5 rounded-full" style="background:${asset.dot}"></span>
          <span class="font-semibold">${asset.name}</span>
          <span class="text-white/55 text-xs">${asset.ticker}</span>
        </span>
        <span class="text-xs text-white/55">${fmtUSD(asset.price)}</span>
      `;
      btn.addEventListener("click", ()=>{
        setSelected(asset.ticker);
        menu.classList.add("hidden-soft");
      });
      wrap.appendChild(btn);
    });
  }

  function setSelected(ticker){
    selected = ASSETS.find(a=>a.ticker===ticker) || ASSETS[0];

    const calcTitle = $("calcTitle");
    if (calcTitle) calcTitle.textContent = `${selected.name} (${selected.ticker})`;

    const assetTicker = $("assetTicker");
    if (assetTicker) assetTicker.textContent = selected.ticker;

    const amountTicker = $("amountTicker");
    if (amountTicker) amountTicker.textContent = selected.ticker;

    const assetDot = $("assetDot");
    if (assetDot) assetDot.style.background = selected.dot;

    // lock range constraints
    const r = $("lockRange");
    if (r) {
      r.min = selected.lockMin;
      r.max = selected.lockMax;
      r.value = clamp(Number(r.value), Number(r.min), Number(r.max));
    }

    // default amount if empty/0
    const amountInput = $("amountInput");
    if (amountInput) {
      const amt = Number(amountInput.value || 0);
      if (amt <= 0) amountInput.value = selected.min;
    }

    recalc();
  }

  const assetBtn = $("assetBtn");
  if (assetBtn) {
    assetBtn.addEventListener("click", ()=>{
      const menu = $("assetMenu");
      if (menu) menu.classList.toggle("hidden-soft");
    });
  }

  // -----------------------------
  // Calculator logic (UPDATED)
  // IMPORTANT: APY must be EXACTLY selected.baseApy (117.6 etc.)
  // reward_period = amount * (apy/100) * (days/365)
  // increase_year  = amount * (apy/100)  (optional element id: increaseYearValue)
  // -----------------------------
// -----------------------------
// Calculator logic
// APY = % por lock period
// +5% EXTRA COMPUESTO POR DÍA
// -----------------------------
const DAILY_BONUS = 0.05; // 5% diario

function calcApy(){
  // APY base EXACTO (120.10 etc.)
  return Number(selected.baseApy || 0);
}

function recalc(){
  const amount = Math.max(0, Number(($("amountInput")?.value) || 0));
  const days   = Number(($("lockRange")?.value) || 1);

  // UI
  $("lockLabel") && ($("lockLabel").textContent = `${days} days`);

  const usd = amount * Number(selected.price || 0);
  $("usdValue") && ($("usdValue").textContent = fmtUSD(usd));

  const apy = calcApy();
  $("apyValue") && ($("apyValue").textContent = apy.toFixed(2));

  // -----------------------------
  // CORE MATH
  // -----------------------------

  // Reward base por lock (NO anual)
  const baseReward = amount * (apy / 100);

  // Bonus diario compuesto
  const dailyMultiplier = Math.pow(1 + DAILY_BONUS, days);

  // Reward final
  const reward = baseReward * dailyMultiplier;

  $("rewardValue") &&
    ($("rewardValue").textContent = `${reward.toFixed(4)} ${selected.ticker}`);

  // (opcional) mostrar breakdown si quieres
  const dbg = document.getElementById("rewardDebug");
  if (dbg) {
    dbg.innerHTML = `
      Base reward: ${baseReward.toFixed(4)}<br>
      Daily bonus x${dailyMultiplier.toFixed(2)}
    `;
  }

  // Modal snapshot
  $("modalAsset") && ($("modalAsset").textContent = selected.ticker);
  $("modalAmount") && ($("modalAmount").textContent = `${amount} ${selected.ticker}`);
  $("modalLock") && ($("modalLock").textContent = `${days} days`);
  $("modalReward") && ($("modalReward").textContent = `${reward.toFixed(4)} ${selected.ticker}`);
}

  const amountInputEl = $("amountInput");
  if (amountInputEl) amountInputEl.addEventListener("input", recalc);

  const lockRangeEl = $("lockRange");
  if (lockRangeEl) lockRangeEl.addEventListener("input", recalc);

  // -----------------------------
  // Options cards
  // -----------------------------
  const sparkPaths = {
    wavy:    "M2 46 C 18 38, 26 54, 40 46 S 62 38, 78 46 S 98 56, 112 46 S 138 38, 156 46 S 182 54, 198 46",
    wavy2:   "M2 46 C 20 54, 28 32, 44 46 S 70 56, 88 46 S 112 32, 132 46 S 156 58, 176 46 S 190 34, 198 46",
    flat:    "M2 46 C 30 46, 60 46, 88 46 S 140 46, 198 46",
    spiky:   "M2 46 C 18 18, 34 74, 52 46 S 78 18, 96 46 S 120 80, 140 46 S 162 18, 178 46 S 190 70, 198 46",
    spiky2:  "M2 46 C 12 70, 22 12, 40 46 S 60 74, 78 46 S 98 12, 116 46 S 140 82, 156 46 S 176 12, 190 46 S 196 60, 198 46",
    wavefast:"M2 46 C 10 36, 18 56, 26 46 S 42 36, 58 46 S 74 56, 90 46 S 106 36, 122 46 S 138 56, 154 46 S 170 36, 186 46 S 194 56, 198 46",
  };

  function cardIcon(ticker){
    const map = {
      ETH:  { bg:"rgba(6,182,212,.15)",  fg:"rgba(6,182,212,.95)",  txt:"Ξ" },
      USDT: { bg:"rgba(34,197,94,.15)",  fg:"rgba(34,197,94,.95)",  txt:"₮" },
      BTC:  { bg:"rgba(249,115,22,.15)", fg:"rgba(249,115,22,.95)", txt:"₿" },
      SOL:  { bg:"rgba(236,72,153,.15)", fg:"rgba(236,72,153,.95)", txt:"≋" },
      LTC:  { bg:"rgba(148,163,184,.15)",fg:"rgba(148,163,184,.95)",txt:"Ł" },
      TRX:  { bg:"rgba(239,68,68,.15)",  fg:"rgba(239,68,68,.95)",  txt:"T" },
    };
    return map[ticker] || { bg:"rgba(255,255,255,.12)", fg:"rgba(255,255,255,.9)", txt:"◎" };
  }

  function renderOptions(list){
    const grid = $("optionsGrid");
    if (!grid) return;

    grid.innerHTML = "";
    list.forEach(opt=>{
      const ic = cardIcon(opt.ticker);
      const div = document.createElement("div");
      div.className = "glass rounded-3xl p-5 hover:translate-y-[-2px] transition shadow-soft";
      div.innerHTML = `
        <div class="flex items-start justify-between gap-3">
          <div class="flex items-center gap-3">
            <div class="h-10 w-10 rounded-2xl flex items-center justify-center"
                 style="background:${ic.bg}; border:1px solid rgba(255,255,255,.10)">
              <span style="color:${ic.fg}; font-weight:800">${ic.txt}</span>
            </div>
            <div>
              <div class="font-bold">${opt.name}</div>
              <div class="text-xs text-white/55 -mt-0.5">${opt.ticker}</div>
            </div>
          </div>

          <button class="btn rounded-xl px-3 py-2 text-sm" data-stake="${opt.ticker}">
            Stake
          </button>
        </div>

        <div class="mt-4 grid grid-cols-2 gap-3 text-sm">
          <div class="glass-dark rounded-2xl p-4">
            <div class="text-xs text-white/60">APY</div>
            <div class="mt-1 text-xl font-extrabold">~ ${Number(opt.apy).toFixed(2)}%</div>
          </div>
          <div class="glass-dark rounded-2xl p-4">
            <div class="text-xs text-white/60">Unstake</div>
            <div class="mt-1 text-xl font-extrabold">${opt.unstake}</div>
          </div>
        </div>

        <div class="mt-3 flex items-center justify-between text-xs text-white/60">
          <span>Minimum</span>
          <span class="text-white/80 font-semibold">${opt.min}</span>
        </div>

        <div class="mt-4 glass-dark rounded-2xl p-3">
          <svg viewBox="0 0 200 60" class="w-full h-12">
            <path d="${sparkPaths[opt.spark] || sparkPaths.wavy}" fill="none" stroke="rgba(167,139,250,.85)" stroke-width="2.2" stroke-linecap="round"/>
            <path d="${sparkPaths[opt.spark] || sparkPaths.wavy}" fill="none" stroke="rgba(6,182,212,.25)" stroke-width="6" stroke-linecap="round"/>
          </svg>
        </div>
      `;
      grid.appendChild(div);
    });

    // bind stake buttons
    grid.querySelectorAll("[data-stake]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const t = btn.getAttribute("data-stake");
        setSelected(t);
        if (typeof openModal === "function") openModal();
      });
    });
  }

  // -----------------------------
  // shuffle/sort (FIXED for 100%+ APY)
  // keeps APY in a realistic high range (edit as you want)
  // also syncs ASSETS.baseApy so calculator matches the cards
  // -----------------------------
  function shuffleRates(){
    OPTIONS.forEach(o=>{
      const mult = rnd(0.95, 1.05);          // small drift
      o.apy = clamp(o.apy * mult, 50, 200);  // keep 100%+ valid
      const a = ASSETS.find(x => x.ticker === o.ticker);
      if (a) a.baseApy = o.apy;
    });

    renderOptions(OPTIONS);
    recalc();
  }

  function sortByApy(){
    OPTIONS.sort((a,b)=> b.apy - a.apy);
    renderOptions(OPTIONS);
  }

  $("btnShuffle")?.addEventListener("click", shuffleRates);
  $("btnShuffleM")?.addEventListener("click", shuffleRates);
  $("btnSort")?.addEventListener("click", sortByApy);
  $("btnSortM")?.addEventListener("click", sortByApy);

  // -----------------------------
  // Init
  // -----------------------------
  const yearEl = $("year");
  if (yearEl) yearEl.textContent = new Date().getFullYear();

  renderAssetMenu();
  renderOptions(OPTIONS);
  setSelected("ETH");
  recalc();
</script>

</body>
</html>
